"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(a){a.fn.animateCSS=function(t,n,o){return this.each(function(){var e=a(this);n&&"function"!=typeof n||(o=n,n=0);setTimeout(function(){e.addClass("animated "+t),"hidden"==e.css("visibility")&&e.css({visibility:"visible"}),e.is(":hidden")&&e.show(),e.bind("webkitAnimationEnd animationend oAnimationEnd",function(){"function"==typeof o&&o.call(this)})},n)})}}(jQuery);var ContentBtns=[].concat(_toConsumableArray(document.querySelectorAll(".apart")));ContentBtns.forEach(function(t){t.onclick=function(){var e=t.getAttribute("data-id");$("#"+e).addClass("is-open")}});var closeBtnsContent=[].concat(_toConsumableArray(document.querySelectorAll(".close-content")));function getURL(e){if(null==e);else{var t=location.href;[].concat(_toConsumableArray(e.querySelectorAll("a"))).map(function(e){if(e.href===t)return e.classList.add("active-link")})}}closeBtnsContent.forEach(function(t){t.onclick=function(){var e=t.closest(".content-content");e.parentElement.classList.remove("is-open"),console.log(e.parentElement)}}),window.onclick=function(e){"content-content"===e.target.className&&e.target.classList.remove("is-open")},getURL(document.getElementById("menu-items"));var coll=document.getElementsByClassName("collapsible");for(i=0;i<coll.length;i++)coll[i].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?(e.style.maxHeight=null,e.style.borderBottom=null):(e.style.maxHeight=e.scrollHeight+"px",e.style.borderBottom="1px solid #e0e0e0",console.log(e))});var i,c=document.getElementsByClassName("paper__article-preview");for(i=0;i<c.length;i++)c[i].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:(e.style.maxHeight=e.scrollHeight+"px",console.log(e))});function c(e){console.log(e)}$(function(){$(window).scroll(function(){300<$(this).scrollTop()?($(".go-top").addClass("expand"),$(".page-header-alpha").addClass("scroll")):($(".go-top").removeClass("expand"),$(".page-header-alpha").removeClass("scroll"))}),$(".go-top").click(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},1e3)})});var $this=$(void 0);$("html").easeScroll(),$(document).ready(function(){$(".your-class").slick({infinite:!1,cssEase:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",speed:900,dots:!0,arrows:!1,centerMode:!0,centerPadding:"20%",slidesToShow:1,responsive:[{breakpoint:768,settings:{slidesToShow:1,centerMode:!0,centerPadding:"10%",speed:200}}]}),$(".slider").slick({infinite:!1,cssEase:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",speed:900,vertical:!0,verticalSwiping:!0,slidesToShow:1,slidesToScroll:1,dots:!0,prevArrow:!1,nextArrow:!1}),$(".text").slick({infinite:!1,speed:900,slidesToShow:1,slidesToScroll:1,dots:!0,prevArrow:!1,nextArrow:!1})}),jQuery(function(s){s.fn.hScroll=function(a){a=a||120,s(this).bind("DOMMouseScroll mousewheel",function(e){var t=e.originalEvent,n=t.detail?t.detail*-a:t.wheelDelta,o=s(this).scrollLeft();o+=0<n?-a:a,s(this).scrollLeft(o),e.preventDefault()})}}),$(document).ready(function(){$("#box").hScroll(60)});var modalBtns=[].concat(_toConsumableArray(document.querySelectorAll(".button")));modalBtns.forEach(function(t){t.onclick=function(){var e=t.getAttribute("data-modal");$("#"+e).addClass("is-open")}});var closeBtns=[].concat(_toConsumableArray(document.querySelectorAll(".close-contact")));closeBtns.forEach(function(t){t.onclick=function(){var e=t.closest(".modal");e.parentElement.classList.remove("is-open"),console.log(e.parentElement)}}),window.onclick=function(e){"modal"===e.target.className&&e.target.classList.remove("is-open")};var prevScrollpos=window.pageYOffset;window.onscroll=function(){var e=window.pageYOffset;prevScrollpos<e?e<300&&(document.getElementById("nav").style.transform="translateY(0px)"):document.getElementById("nav").style.transform="translateY(0px)",prevScrollpos=e};var wrapperMenu=document.querySelector(".wrapper-menu");function openTabs(e,t){var n,o;for(n=document.getElementsByClassName("tabcontent"),a=0;a<n.length;a++)n[a].style.display="none";for(o=document.getElementsByClassName("tablinks"),a=0;a<o.length;a++)o[a].className=o[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active";var a=$("#"+t).data("img"),s=$("#"+t).data("name"),i=$("#"+t+" #img_tabs");$("#tabs-img").css("background-image","url("+a+")"),$("#tabs_text").html(s),i.css("background-image","url("+a+")"),console.log(a)}function openTabsP(e,t){var n,o;for(n=document.getElementsByClassName("tabcontent"),a=0;a<n.length;a++)n[a].style.display="none";for(o=document.getElementsByClassName("tablinks"),a=0;a<o.length;a++)o[a].className=o[a].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active";var a=$("#"+t).data("img"),s=$("#"+t).data("name"),i=$("#"+t+" #img_tabs");i.css("background-image","url("+a+")"),$("#contentThree #tabs-img").css("background-image","url("+a+")"),$("#contentThree #tabs_text").html(s),console.log(i)}function openTabsRules(e,t){var n,o,a;for(o=document.getElementsByClassName("tabcontentRule"),n=0;n<o.length;n++)o[n].style.display="none";for(a=document.getElementsByClassName("tablinksRule"),n=0;n<a.length;n++)a[n].className=a[n].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}!function(){var n,o,a,s,i,t,l,r,c;(n=document.querySelector(".wrapper-menu"),o=document.querySelector(".menu"),a=document.querySelector(".menu__list"),s=document.querySelector(".menu__brand"),i=document.querySelectorAll(".menu__item"),t=$(".menu__link"),l=!1,r=function(){if(l){o.classList.remove("menu--active"),a.classList.remove("menu__list--active"),s.classList.remove("menu__brand--active"),n.classList.remove("open"),$("header.nav ul li.logo").css("padding-left","1.5rem");for(e=0,t=i.length;e<t;e++)i[e].classList.remove("menu__item--active");l=!1}else{o.classList.add("menu--active"),a.classList.add("menu__list--active"),s.classList.add("menu__brand--active"),n.classList.add("open"),$("header.nav ul li.logo").css("padding-left","0"),$(window).off("scroll");for(var e=0,t=i.length;e<t;e++)i[e].classList.add("menu__item--active");l=!0}},c=function(){if(l){o.classList.remove("menu--active"),a.classList.remove("menu__list--active"),s.classList.remove("menu__brand--active"),n.classList.remove("open"),$("header.nav ul li.logo").css("padding-left","1.5rem");for(e=0,t=i.length;e<t;e++)i[e].classList.remove("menu__item--active");l=!1}else{o.classList.add("menu--active"),a.classList.add("menu__list--active"),s.classList.add("menu__brand--active"),n.classList.add("open"),$("header.nav ul li.logo").css("padding-left","0"),$(window).off("scroll");for(var e=0,t=i.length;e<t;e++)i[e].classList.add("menu__item--active");l=!0}},{init:function(){!function(){n.addEventListener("click",c,!1);for(var e=0;e<t.length;e++)t[e].addEventListener("click",r,!1)}()}}).init()}(),$(document).on("click",'.footer a[href^="#"]',function(e){e.preventDefault(),$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top},1500)}),function(r){var c=r.document.documentElement;function o(e,t){var n,o,a=r.pageYOffset,s=a+(n=c.clientHeight,o=r.innerHeight,n<o?o:n),i=e.offsetHeight,l=function(e){for(var t=0,n=0;isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(n+=e.offsetLeft),e=e.offsetParent;);return{top:t,left:n}}(e).top;return l+i*(t=t||0)<=s&&a<=l+i}function t(e){this.options=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.defaults,e),this._init()}t.prototype={defaults:{axis:"y",distance:"25px",duration:"0.66s",delay:"0s",viewportFactor:.33},_init:function(){var n=this;this.elems=Array.prototype.slice.call(c.querySelectorAll("[data-scrollReveal]")),this.scrolled=!1,this.elems.forEach(function(e,t){n.animate(e)});r.addEventListener("scroll",function(){n.scrolled||(n.scrolled=!0,setTimeout(function(){n._scrollPage()},60))},!1),r.addEventListener("resize",function(){n.resizeTimeout&&clearTimeout(n.resizeTimeout),n.resizeTimeout=setTimeout(function(){n._scrollPage(),n.resizeTimeout=null},200)},!1)},_scrollPage:function(){var n=this;this.elems.forEach(function(e,t){o(e,n.options.viewportFactor)&&n.animate(e)}),this.scrolled=!1},parseLanguage:function(e){var n,o,a,s=e.getAttribute("data-scrollreveal").split(/[, ]+/),i={};return o=[],a=["from","the","and","then","but"],s.forEach(function(e,t){-1<a.indexOf(e)||o.push(e)}),(s=o).forEach(function(e,t){switch(e){case"enter":return"top"!=(n=s[t+1])&&"bottom"!=n||(i.axis="y"),void("left"!=n&&"right"!=n||(i.axis="x"));case"after":case"wait":return void(i.delay=s[t+1]);case"move":return void(i.distance=s[t+1]);case"over":return void(i.duration=s[t+1]);case"trigger":return void(i.eventName=s[t+1]);default:return}}),"top"!=n&&"left"!=n||("undefined"==!_typeof(i.distance)?i.distance="-"+i.distance:i.distance="-"+this.options.distance),i},genCSS:function(e,t){var n=this.parseLanguage(e),o=n.distance||this.options.distance,a=n.duration||this.options.duration,s=n.delay||this.options.delay;return{transition:"-webkit-transition: all "+a+" ease "+s+";-moz-transition: all "+a+" ease "+s+";-o-transition: all "+a+" ease "+s+";transition: all "+a+" ease "+s+";",initial:"-webkit-transform: translate"+(t=n.axis||this.options.axis)+"("+o+");-moz-transform: translate"+t+"("+o+");transform: translate"+t+"("+o+");opacity: 0;",target:"-webkit-transform: translate"+t+"(0);-moz-transform: translate"+t+"(0);transform: translate"+t+"(0);opacity: 1;",totalDuration:1e3*(parseFloat(a)+parseFloat(s))}},animate:function(e){var t=this.genCSS(e);e.getAttribute("data-sr-init")||(e.setAttribute("style",t.initial),e.setAttribute("data-sr-init",!0)),e.getAttribute("data-sr-complete")||o(e,this.options.viewportFactor)&&(e.setAttribute("style",t.target+t.transition),setTimeout(function(){e.removeAttribute("style"),e.setAttribute("data-sr-complete",!0)},t.totalDuration))}},document.addEventListener("DOMContentLoaded",function(e){r.scrollReveal=new t})}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGUuanMiLCJhcGFydG1lbnQuanMiLCJhX2FjdGl2ZS5qcyIsImNvbGxhcHNlLmpzIiwiaW5kZXguanMiLCJtb2RhbC5qcyIsIk5hdkhpZGRlLmpzIiwidGFicy5qcyIsInNtb3RoLmpzIiwieHJldmVsLmpzIl0sIm5hbWVzIjpbIiQiLCJmbiIsImFuaW1hdGVDU1MiLCJlZmZlY3QiLCJkZWxheSIsImNhbGxiYWNrIiwidGhpcyIsImVhY2giLCIkdGhpcyIsInNldFRpbWVvdXQiLCJhZGRDbGFzcyIsImNzcyIsInZpc2liaWxpdHkiLCJpcyIsInNob3ciLCJiaW5kIiwiY2FsbCIsImpRdWVyeSIsIkNvbnRlbnRCdG5zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ0bkNvbnRlbnQiLCJvbmNsaWNrIiwiQ29udGVudCIsImdldEF0dHJpYnV0ZSIsImNsb3NlQnRuc0NvbnRlbnQiLCJnZXRVUkwiLCJjb250YWluZXJFTCIsInVybCIsImxvY2F0aW9uIiwiaHJlZiIsImxpbmsiLCJtYXAiLCJjbGFzc0xpc3QiLCJhZGQiLCJtb2RhbENvbnRlbnQiLCJjbG9zZXN0IiwicGFyZW50RWxlbWVudCIsInJlbW92ZSIsImNvbnNvbGUiLCJsb2ciLCJ3aW5kb3ciLCJldmVudCIsInRhcmdldCIsImNsYXNzTmFtZSIsImdldEVsZW1lbnRCeUlkIiwiY29sbCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJpIiwibGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRvZ2dsZSIsImNvbnRlbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzdHlsZSIsIm1heEhlaWdodCIsImJvcmRlckJvdHRvbSIsInNjcm9sbEhlaWdodCIsImMiLCJzaWRlIiwibCIsInNjcm9sbCIsInNjcm9sbFRvcCIsInJlbW92ZUNsYXNzIiwiY2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsImFuaW1hdGUiLCJlYXNlU2Nyb2xsIiwicmVhZHkiLCJzbGljayIsImluZmluaXRlIiwiY3NzRWFzZSIsInNwZWVkIiwiZG90cyIsImFycm93cyIsImNlbnRlck1vZGUiLCJjZW50ZXJQYWRkaW5nIiwic2xpZGVzVG9TaG93IiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsInZlcnRpY2FsIiwidmVydGljYWxTd2lwaW5nIiwic2xpZGVzVG9TY3JvbGwiLCJwcmV2QXJyb3ciLCJuZXh0QXJyb3ciLCJoU2Nyb2xsIiwiYW1vdW50Iiwib0V2ZW50Iiwib3JpZ2luYWxFdmVudCIsImRpcmVjdGlvbiIsImRldGFpbCIsIndoZWVsRGVsdGEiLCJwb3NpdGlvbiIsInNjcm9sbExlZnQiLCJtb2RhbEJ0bnMiLCJidG4iLCJtb2RhbCIsImNsb3NlQnRucyIsInByZXZTY3JvbGxwb3MiLCJwYWdlWU9mZnNldCIsIm9uc2Nyb2xsIiwiY3VycmVudFNjcm9sbFBvcyIsInRyYW5zZm9ybSIsIndyYXBwZXJNZW51IiwicXVlcnlTZWxlY3RvciIsIm9wZW5UYWJzIiwiZXZ0IiwidGFiY29udGVudCIsInRhYmxpbmtzIiwiZGlzcGxheSIsInJlcGxhY2UiLCJjdXJyZW50VGFyZ2V0IiwiZGF0YSIsInQiLCJtIiwiaHRtbCIsIm9wZW5UYWJzUCIsIm9wZW5UYWJzUnVsZXMiLCJidXJnZXIiLCJtZW51IiwibWVudUxpc3QiLCJicmFuZCIsIm1lbnVJdGVtcyIsIm1lbnVMaW5rIiwiYWN0aXZlIiwidG9nZ2xlTWVudSIsImlpIiwib2ZmIiwiaW5pdCIsImJpbmRBY3Rpb25zIiwib24iLCJhdHRyIiwib2Zmc2V0IiwidG9wIiwiZG9jRWxlbSIsImRvY3VtZW50RWxlbWVudCIsImlzRWxlbWVudEluVmlld3BvcnQiLCJlbCIsImgiLCJjbGllbnQiLCJpbm5lciIsInNjcm9sbGVkIiwidmlld2VkIiwiZWxIIiwib2Zmc2V0SGVpZ2h0IiwiZWxUb3AiLCJvZmZzZXRUb3AiLCJvZmZzZXRMZWZ0IiwiaXNOYU4iLCJvZmZzZXRQYXJlbnQiLCJsZWZ0IiwiZ2V0T2Zmc2V0Iiwic2Nyb2xsUmV2ZWFsIiwib3B0aW9ucyIsImEiLCJiIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJleHRlbmQiLCJkZWZhdWx0cyIsIl9pbml0IiwicHJvdG90eXBlIiwiYXhpcyIsImRpc3RhbmNlIiwiZHVyYXRpb24iLCJ2aWV3cG9ydEZhY3RvciIsInNlbGYiLCJlbGVtcyIsIkFycmF5Iiwic2xpY2UiLCJfc2Nyb2xsUGFnZSIsInJlc2l6ZVRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJwYXJzZUxhbmd1YWdlIiwiZW50ZXJGcm9tIiwicmV0IiwiYmxhY2tsaXN0Iiwid29yZHMiLCJzcGxpdCIsInBhcnNlZCIsIndvcmQiLCJpbmRleE9mIiwicHVzaCIsImV2ZW50TmFtZSIsIl90eXBlb2YiLCJnZW5DU1MiLCJkaXN0IiwiZHVyIiwidHJhbnNpdGlvbiIsImluaXRpYWwiLCJ0b3RhbER1cmF0aW9uIiwicGFyc2VGbG9hdCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6IjZXQUFBLFNBQUFBLEdBRUFBLEVBQUFDLEdBQUFDLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FHQSxPQUFBQyxLQUFBQyxLQUFBLFdBR0EsSUFBQUMsRUFBQVIsRUFBQU0sTUFHQUYsR0FBQSxtQkFBQUEsSUFHQUMsRUFBQUQsRUFHQUEsRUFBQSxHQUlBSyxXQUFBLFdBR0FELEVBQUFFLFNBQUEsWUFBQVAsR0FHQSxVQUFBSyxFQUFBRyxJQUFBLGVBR0FILEVBQUFHLEtBQ0FDLFdBQUEsWUFNQUosRUFBQUssR0FBQSxZQUdBTCxFQUFBTSxPQUtBTixFQUFBTyxLQUFBLGdEQUFBLFdBR0EsbUJBQUFWLEdBR0FBLEVBQUFXLEtBQUFWLFNBT0FGLE1BMURBLENBZ0VBYSxRQ2hFQSxJQUFBQyxlQUFBQSxPQUFBQSxtQkFBQUMsU0FBQUMsaUJBQUEsWUFDQUYsWUFBQUcsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxRQUFBLFdBQ0EsSUFBQUMsRUFBQUYsRUFBQUcsYUFBQSxXQUNBekIsRUFBQSxJQUFBd0IsR0FB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QUFJLFdBQUE3TCxNQU1BK0QsUUFBQSxTQUFBd0UsR0FDQSxJQUFBaEksRUFBQUwsS0FBQXFMLE9BQUFoRCxHQUVBQSxFQUFBbEgsYUFBQSxrQkFDQWtILEVBQUF1RCxhQUFBLFFBQUF2TCxFQUFBb0wsU0FDQXBELEVBQUF1RCxhQUFBLGdCQUFBLElBR0F2RCxFQUFBbEgsYUFBQSxxQkFJQWlILEVBQUFDLEVBQUFySSxLQUFBcUosUUFBQVksa0JBQ0E1QixFQUFBdUQsYUFBQSxRQUFBdkwsRUFBQWlDLE9BQUFqQyxFQUFBbUwsWUFFQXJMLFdBQUEsV0FDQWtJLEVBQUF3RCxnQkFBQSxTQUNBeEQsRUFBQXVELGFBQUEsb0JBQUEsSUFDQXZMLEVBQUFxTCxrQkFNQTdLLFNBQUFnQyxpQkFBQSxtQkFBQSxTQUFBeUQsR0FDQWxFLEVBQUFnSCxhQUFBLElBQUFBLElBclJBLENBd1JBaEgiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgkKSB7XHJcblxyXG4gICAgJC5mbi5hbmltYXRlQ1NTID0gZnVuY3Rpb24gKGVmZmVjdCwgZGVsYXksIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgIC8vIFJldHVybiB0aGlzIHRvIG1haW50YWluIGNoYWluYWJpbGl0eVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FjaGUgJCh0aGlzKSBmb3Igc3BlZWRcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGRlbGF5IGV4aXN0cyBvciBpZiBpdCdzIGEgY2FsbGJhY2tcclxuICAgICAgICAgICAgaWYgKCFkZWxheSB8fCB0eXBlb2YgZGVsYXkgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBjYWxsYmFjaywgbW92ZSBpdCB0byBjYWxsYmFjayBzbyB3ZSBjYW4gY2FsbCBpdCBsYXRlclxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBkZWxheTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIGRlbGF5IHRvIDAgZm9yIHRoZSBzZXRUaW1lb3V0XHJcbiAgICAgICAgICAgICAgICBkZWxheSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXJ0IGEgY291bnRlciBzbyB3ZSBjYW4gZGVsYXkgdGhlIGFuaW1hdGlvbiBpZiByZXF1aXJlZFxyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBhbmltYXRpb24gZWZmZWN0IHdpdGggY2xhc3Nlc1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuYWRkQ2xhc3MoJ2FuaW1hdGVkICcgKyBlZmZlY3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBlbGVtZW5yIGhhcyBiZWVuIGhpZGRlbiB0byBzdGFydCB3aXRoXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuY3NzKCd2aXNpYmlsaXR5JykgPT0gJ2hpZGRlbicpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQgaGFzLCBzaG93IGl0IChhZnRlciB0aGUgY2xhc3MgaGFzIGJlZW4gYWRkZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Zpc2liaWxpdHknOiAndmlzaWJsZSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVsZW1lbnQgaXMgaGlkZGVuXHJcbiAgICAgICAgICAgICAgICBpZiAoJHRoaXMuaXMoJzpoaWRkZW4nKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGl0XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgYW5pbWF0aW9uIGhhcyBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgJHRoaXMuYmluZCgnd2Via2l0QW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZCBvQW5pbWF0aW9uRW5kJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYSBjYWxsYmFjayBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU3BlY2lmeSB0aGUgZGVsYXlcclxuICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG5cclxufSkoalF1ZXJ5KTsiLCJ2YXIgQ29udGVudEJ0bnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcGFydFwiKV07XHJcbkNvbnRlbnRCdG5zLmZvckVhY2goZnVuY3Rpb24oYnRuQ29udGVudCl7XHJcbiAgYnRuQ29udGVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgQ29udGVudCA9IGJ0bkNvbnRlbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICQoXCIjXCIrQ29udGVudCkuYWRkQ2xhc3MoJ2lzLW9wZW4nKVxyXG4gIH1cclxufSk7XHJcblxyXG52YXIgY2xvc2VCdG5zQ29udGVudCA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlLWNvbnRlbnRcIildO1xyXG5jbG9zZUJ0bnNDb250ZW50LmZvckVhY2goZnVuY3Rpb24oYnRuQ29udGVudCl7XHJcbiAgYnRuQ29udGVudC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIG1vZGFsQ29udGVudCA9IGJ0bkNvbnRlbnQuY2xvc2VzdCgnLmNvbnRlbnQtY29udGVudCcpO1xyXG4gICAgbW9kYWxDb250ZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3BlbicpO1xyXG4gICAgY29uc29sZS5sb2cobW9kYWxDb250ZW50LnBhcmVudEVsZW1lbnQpXHJcblxyXG4gICBcclxuICB9XHJcbn0pO1xyXG5cclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xyXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NOYW1lID09PSBcImNvbnRlbnQtY29udGVudFwiKSB7XHJcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3BlbicpO1xyXG4gIH1cclxufSIsImZ1bmN0aW9uIGdldFVSTChjb250YWluZXJFTCl7XHJcblx0aWYgKGNvbnRhaW5lckVMID09IG51bGwpIHtcclxuXHRcdFxyXG5cdH1lbHNle1xyXG5cdFx0bGV0IHVybCA9IGxvY2F0aW9uLmhyZWYsXHJcblx0XHRsaW5rID0gWy4uLmNvbnRhaW5lckVMLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKV07XHJcblx0XHRsaW5rLm1hcChsaW5rID0+IHtcclxuXHRcdFx0aWYgKGxpbmsuaHJlZiA9PT0gdXJsKSByZXR1cm4gbGluay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtbGluaycpO1xyXG5cdFx0fSlcdFxyXG5cdH1cclxuXHRcclxufVxyXG5cclxuZ2V0VVJMKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51LWl0ZW1zJykpOyIsInZhciBjb2xsID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbGxhcHNpYmxlXCIpO1xyXG52YXIgaTtcclxuXHJcbmZvciAoaSA9IDA7IGkgPCBjb2xsLmxlbmd0aDsgaSsrKSB7XHJcbiAgY29sbFtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICB2YXIgY29udGVudCA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgaWYgKGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0KXtcclxuICAgICAgY29udGVudC5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gICAgICBjb250ZW50LnN0eWxlLmJvcmRlckJvdHRvbSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb250ZW50LnN0eWxlLm1heEhlaWdodCA9IGNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgXCJweFwiO1xyXG4gICAgICBjb250ZW50LnN0eWxlLmJvcmRlckJvdHRvbSA9ICcxcHggc29saWQgI2UwZTBlMCc7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnQpXHJcbiAgICB9IFxyXG4gIH0pO1xyXG59XHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgRkFRU1xyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki8gIFxyXG52YXIgYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJwYXBlcl9fYXJ0aWNsZS1wcmV2aWV3XCIpO1xyXG52YXIgaTtcclxuXHJcbmZvciAoaSA9IDA7IGkgPCBjLmxlbmd0aDsgaSsrKSB7XHJcbiAgY1tpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIik7XHJcbiAgICB2YXIgc2lkZSA9IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgaWYgKHNpZGUuc3R5bGUubWF4SGVpZ2h0KXtcclxuICAgICAgc2lkZS5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xyXG4gXHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2lkZS5zdHlsZS5tYXhIZWlnaHQgPSBzaWRlLnNjcm9sbEhlaWdodCArIFwicHhcIjtcclxuICAgIFxyXG5cclxuICAgICAgY29uc29sZS5sb2coc2lkZSlcclxuICAgIH0gXHJcbiAgfSk7XHJcbn0iLCIndXNlIHN0cmljdCc7XHJcbi8vIEdvIFRPUFxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIC8vIFNob3cgb3IgaGlkZSB0aGUgc3RpY2t5IGZvb3RlciBidXR0b25cclxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoJCh0aGlzKS5zY3JvbGxUb3AoKSA+IDMwMCkge1xyXG4gICAgICAgICQoJy5nby10b3AnKS5hZGRDbGFzcygnZXhwYW5kJyk7XHJcbiAgICAgICAgJCgnLnBhZ2UtaGVhZGVyLWFscGhhJykuYWRkQ2xhc3MoJ3Njcm9sbCcpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnLmdvLXRvcCcpLnJlbW92ZUNsYXNzKCdleHBhbmQnKTtcclxuICAgICAgICAgJCgnLnBhZ2UtaGVhZGVyLWFscGhhJykucmVtb3ZlQ2xhc3MoJ3Njcm9sbCcpXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFuaW1hdGUgdGhlIHNjcm9sbCB0byB0b3BcclxuICAgICQoJy5nby10b3AnKS5jbGljayhmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICBzY3JvbGxUb3A6IDBcclxuICAgICAgfSwgMTAwMCk7XHJcbiAgICB9KVxyXG5cclxuXHJcbiAgfSk7XHJcblxyXG4gICBmdW5jdGlvbiBjIChsKXtcclxuICAgXHRjb25zb2xlLmxvZyhsKTtcclxuICAgfVxyXG4gICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAkKFwiaHRtbFwiKS5lYXNlU2Nyb2xsKCk7XHJcblxyXG4gICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgRG9jdW1lbnRcclxuICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovICBcclxuXHJcbiAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgQ09ERVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyBcclxuICAgICAkKFwiLnlvdXItY2xhc3NcIikuc2xpY2soe1xyXG4gICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgIGNzc0Vhc2U6IFwiY3ViaWMtYmV6aWVyKDAuMTc1LCAwLjg4NSwgMC4zMiwgMS4yNzUpXCIsXHJcbiAgICAgIHNwZWVkOiA5MDAsXHJcbiAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgIGFycm93czpmYWxzZSxcclxuICAgICAgY2VudGVyTW9kZTogdHJ1ZSxcclxuICAgICAgY2VudGVyUGFkZGluZzogXCIyMCVcIixcclxuICAgICAgc2xpZGVzVG9TaG93OiAxLFxyXG4gICAgICByZXNwb25zaXZlIDogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJyZWFrcG9pbnQ6NzY4LFxyXG4gICAgICAgICAgc2V0dGluZ3M6e1xyXG4gICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgICAgICBjZW50ZXJNb2RlOiB0cnVlLFxyXG4gICAgICAgICAgICAgIGNlbnRlclBhZGRpbmc6IFwiMTAlXCIsXHJcbiAgICAgICAgICAgICAgc3BlZWQ6MjAwXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBdXHJcbiAgICB9KTtcclxuXHJcbiAgICAgJCgnLnNsaWRlcicpLnNsaWNrKHtcclxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgICBjc3NFYXNlOiBcImN1YmljLWJlemllcigwLjE3NSwgMC44ODUsIDAuMzIsIDEuMjc1KVwiLFxyXG4gICAgICBzcGVlZDogOTAwLFxyXG4gICAgICB2ZXJ0aWNhbDogdHJ1ZSxcclxuICAgICAgdmVydGljYWxTd2lwaW5nOiB0cnVlLFxyXG4gICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBwcmV2QXJyb3c6IGZhbHNlLFxyXG4gICAgICBuZXh0QXJyb3c6IGZhbHNlXHJcbiAgICB9KTtcclxuICAgICAkKCcudGV4dCcpLnNsaWNrKHtcclxuICAgICAgaW5maW5pdGU6IGZhbHNlLFxyXG4gICAgIFxyXG4gICAgICBzcGVlZDogOTAwLFxyXG4gICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxyXG4gICAgICBkb3RzOiB0cnVlLFxyXG4gICAgICBwcmV2QXJyb3c6IGZhbHNlLFxyXG4gICAgICBuZXh0QXJyb3c6IGZhbHNlXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgQ09ERVxyXG4gICAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qLyBcclxuICAgfSlcclxuXHJcbiAgIGpRdWVyeShmdW5jdGlvbiAoJCkge1xyXG4gICAgJC5mbi5oU2Nyb2xsID0gZnVuY3Rpb24gKGFtb3VudCkge1xyXG4gICAgICAgIGFtb3VudCA9IGFtb3VudCB8fCAxMjA7XHJcbiAgICAgICAgJCh0aGlzKS5iaW5kKFwiRE9NTW91c2VTY3JvbGwgbW91c2V3aGVlbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG9FdmVudCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQsIFxyXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gb0V2ZW50LmRldGFpbCA/IG9FdmVudC5kZXRhaWwgKiAtYW1vdW50IDogb0V2ZW50LndoZWVsRGVsdGEsIFxyXG4gICAgICAgICAgICAgICAgcG9zaXRpb24gPSAkKHRoaXMpLnNjcm9sbExlZnQoKTtcclxuICAgICAgICAgICAgcG9zaXRpb24gKz0gZGlyZWN0aW9uID4gMCA/IC1hbW91bnQgOiBhbW91bnQ7XHJcbiAgICAgICAgICAgICQodGhpcykuc2Nyb2xsTGVmdChwb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbn0pO1xyXG5cclxuICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAkKCcjYm94JykuaFNjcm9sbCg2MCk7IC8vIFlvdSBjYW4gcGFzcyAob3B0aW9uYWxseSkgc2Nyb2xsaW5nIGFtb3VudFxyXG59KTtcclxuXHJcbiAgICIsInZhciBtb2RhbEJ0bnMgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idXR0b25cIildO1xyXG5tb2RhbEJ0bnMuZm9yRWFjaChmdW5jdGlvbihidG4pe1xyXG4gIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbW9kYWwgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJyk7XHJcbiAgICAgICQoXCIjXCIrbW9kYWwpLmFkZENsYXNzKCdpcy1vcGVuJylcclxuICB9XHJcbn0pO1xyXG5cclxudmFyIGNsb3NlQnRucyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNsb3NlLWNvbnRhY3RcIildO1xyXG5jbG9zZUJ0bnMuZm9yRWFjaChmdW5jdGlvbihidG4pe1xyXG4gIGJ0bi5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgdmFyIG1vZGFsID0gYnRuLmNsb3Nlc3QoJy5tb2RhbCcpO1xyXG4gICAgbW9kYWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1vcGVuJyk7XHJcbiAgICBjb25zb2xlLmxvZyhtb2RhbC5wYXJlbnRFbGVtZW50KVxyXG5cclxuICAgXHJcbiAgfVxyXG59KTtcclxuXHJcbndpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTmFtZSA9PT0gXCJtb2RhbFwiKSB7XHJcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtb3BlbicpO1xyXG4gIH1cclxufSIsInZhciBwcmV2U2Nyb2xscG9zID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG53aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcclxudmFyIGN1cnJlbnRTY3JvbGxQb3MgPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgaWYgKHByZXZTY3JvbGxwb3MgPCBjdXJyZW50U2Nyb2xsUG9zKSB7XHJcbiAgXHRpZiAoY3VycmVudFNjcm9sbFBvcyA8IDMwMCkge1xyXG4gIFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdlwiKS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoMHB4KVwiO1xyXG4gIFx0fVxyXG4gIH0gZWxzZSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hdlwiKS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVkoMHB4KVwiO1xyXG4gIH1cclxuICBwcmV2U2Nyb2xscG9zID0gY3VycmVudFNjcm9sbFBvcztcclxufVxyXG5cclxudmFyIHdyYXBwZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndyYXBwZXItbWVudScpO1xyXG5cclxuKGZ1bmN0aW9uKCkge1xyXG4gIFxyXG4gIHZhciBNZW51ID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53cmFwcGVyLW1lbnUnKTtcclxuICAgIHZhciBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lbnUnKTtcclxuICAgIHZhciBtZW51TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19saXN0Jyk7XHJcbiAgICB2YXIgYnJhbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fYnJhbmQnKTtcclxuICAgIHZhciBtZW51SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWVudV9faXRlbScpO1xyXG4gICAgdmFyIG1lbnVMaW5rID0gJCgnLm1lbnVfX2xpbmsnKTtcclxuXHJcblxyXG4gICAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgdmFyIHQgPSBmdW5jdGlvbigpe1xyXG4gICAgICBpZiAoIWFjdGl2ZSkge1xyXG4gICAgICAgIG1lbnUuY2xhc3NMaXN0LmFkZCgnbWVudS0tYWN0aXZlJyk7XHJcbiAgICAgICAgbWVudUxpc3QuY2xhc3NMaXN0LmFkZCgnbWVudV9fbGlzdC0tYWN0aXZlJyk7XHJcbiAgICAgICAgYnJhbmQuY2xhc3NMaXN0LmFkZCgnbWVudV9fYnJhbmQtLWFjdGl2ZScpO1xyXG4gICAgICAgIGJ1cmdlci5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcblxyXG4gICAgICAgICQoJ2hlYWRlci5uYXYgdWwgbGkubG9nbycpLmNzcygncGFkZGluZy1sZWZ0JywgJzAnKTtcclxuICAgICAgICAkKHdpbmRvdykub2ZmKFwic2Nyb2xsXCIpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG1lbnVJdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICBtZW51SXRlbXNbaV0uY2xhc3NMaXN0LmFkZCgnbWVudV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWVudS5jbGFzc0xpc3QucmVtb3ZlKCdtZW51LS1hY3RpdmUnKTtcclxuICAgICAgICBtZW51TGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdtZW51X19saXN0LS1hY3RpdmUnKTtcclxuICAgICAgICBicmFuZC5jbGFzc0xpc3QucmVtb3ZlKCdtZW51X19icmFuZC0tYWN0aXZlJyk7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuICAgICAgICAkKCdoZWFkZXIubmF2IHVsIGxpLmxvZ28nKS5jc3MoJ3BhZGRpbmctbGVmdCcsICcxLjVyZW0nKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBtZW51SXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgbWVudUl0ZW1zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBhY3RpdmUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciB0b2dnbGVNZW51ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICghYWN0aXZlKSB7XHJcbiAgICAgICAgbWVudS5jbGFzc0xpc3QuYWRkKCdtZW51LS1hY3RpdmUnKTtcclxuICAgICAgICBtZW51TGlzdC5jbGFzc0xpc3QuYWRkKCdtZW51X19saXN0LS1hY3RpdmUnKTtcclxuICAgICAgICBicmFuZC5jbGFzc0xpc3QuYWRkKCdtZW51X19icmFuZC0tYWN0aXZlJyk7XHJcbiAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuXHJcbiAgICAgICAgJCgnaGVhZGVyLm5hdiB1bCBsaS5sb2dvJykuY3NzKCdwYWRkaW5nLWxlZnQnLCAnMCcpO1xyXG4gICAgICAgICQod2luZG93KS5vZmYoXCJzY3JvbGxcIik7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbWVudUl0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgIG1lbnVJdGVtc1tpXS5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtLS1hY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtZW51LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnUtLWFjdGl2ZScpO1xyXG4gICAgICAgIG1lbnVMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2xpc3QtLWFjdGl2ZScpO1xyXG4gICAgICAgIGJyYW5kLmNsYXNzTGlzdC5yZW1vdmUoJ21lbnVfX2JyYW5kLS1hY3RpdmUnKTtcclxuICAgICAgICBidXJnZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG4gICAgICAgICQoJ2hlYWRlci5uYXYgdWwgbGkubG9nbycpLmNzcygncGFkZGluZy1sZWZ0JywgJzEuNXJlbScpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IG1lbnVJdGVtcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XHJcbiAgICAgICAgICBtZW51SXRlbXNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnbWVudV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgYmluZEFjdGlvbnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlTWVudSwgZmFsc2UpO1xyXG4gICAgICBmb3IodmFyIGk9MDsgaSA8IG1lbnVMaW5rLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgIG1lbnVMaW5rW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdCwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG5cclxuICAgIH07XHJcbiAgICBcclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGJpbmRBY3Rpb25zKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpbml0OiBpbml0XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgfSgpKTtcclxuICBcclxuICBNZW51LmluaXQoKTtcclxuICBcclxufSgpKTsiLCJmdW5jdGlvbiBvcGVuVGFicyhldnQsIG9wZW5UYWJzKSB7XHJcbiAgICB2YXIgaSwgdGFiY29udGVudCwgdGFibGlua3M7XHJcbiAgICB0YWJjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmNvbnRlbnRcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFiY29udGVudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhYmNvbnRlbnRbaV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgdGFibGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFibGlua3NcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFibGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YWJsaW5rc1tpXS5jbGFzc05hbWUgPSB0YWJsaW5rc1tpXS5jbGFzc05hbWUucmVwbGFjZShcIiBhY3RpdmVcIiwgXCJcIik7XHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcGVuVGFicykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGV2dC5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZSArPSBcIiBhY3RpdmVcIjtcclxuICAgIHZhciBpID0gJChcIiNcIitvcGVuVGFicykuZGF0YShcImltZ1wiKTtcclxuICAgIHZhciB0ID0gJChcIiNcIitvcGVuVGFicykuZGF0YShcIm5hbWVcIik7XHJcbiAgIHZhciBtID0gJCgnIycgKyBvcGVuVGFicyArICcgI2ltZ190YWJzJyk7XHJcbiAgICAkKCcjdGFicy1pbWcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyBpICsgJyknKTtcclxuICAgICQoJyN0YWJzX3RleHQnKS5odG1sKHQpO1xyXG4gICAgbS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyBpICsgJyknKTtcclxuICAgIGNvbnNvbGUubG9nKGkpXHJcbn1cclxuZnVuY3Rpb24gb3BlblRhYnNQKGV2dCwgb3BlblRhYnNQKSB7XHJcbiAgICB2YXIgaSwgdGFiY29udGVudCwgdGFibGlua3M7XHJcbiAgICB0YWJjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInRhYmNvbnRlbnRcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFiY29udGVudC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHRhYmNvbnRlbnRbaV0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgdGFibGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFibGlua3NcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFibGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YWJsaW5rc1tpXS5jbGFzc05hbWUgPSB0YWJsaW5rc1tpXS5jbGFzc05hbWUucmVwbGFjZShcIiBhY3RpdmVcIiwgXCJcIik7XHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcGVuVGFic1ApLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgICBldnQuY3VycmVudFRhcmdldC5jbGFzc05hbWUgKz0gXCIgYWN0aXZlXCI7XHJcbiAgICB2YXIgaSA9ICQoXCIjXCIrb3BlblRhYnNQKS5kYXRhKFwiaW1nXCIpO1xyXG4gICAgdmFyIHQgPSAkKFwiI1wiK29wZW5UYWJzUCkuZGF0YShcIm5hbWVcIik7XHJcbiAgICB2YXIgbSA9ICQoJyMnICsgb3BlblRhYnNQICsgJyAjaW1nX3RhYnMnKTtcclxuXHJcbiAgICBtLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoJyArIGkgKyAnKScpO1xyXG4gICAgJCgnI2NvbnRlbnRUaHJlZSAjdGFicy1pbWcnKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKCcgKyBpICsgJyknKTtcclxuICAgICQoJyNjb250ZW50VGhyZWUgI3RhYnNfdGV4dCcpLmh0bWwodClcclxuICAgIGNvbnNvbGUubG9nKG0gKVxyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuVGFic1J1bGVzKGV2dCwgb3BlblRhYnNSdWxlcykge1xyXG4gICAgdmFyIGksIHRhYmNvbnRlbnQsIHRhYmxpbmtzO1xyXG4gICAgdGFiY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YWJjb250ZW50UnVsZVwiKTtcclxuICAgIGZvciAoaSA9IDA7IGkgPCB0YWJjb250ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGFiY29udGVudFtpXS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICB0YWJsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YWJsaW5rc1J1bGVcIik7XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGFibGlua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB0YWJsaW5rc1tpXS5jbGFzc05hbWUgPSB0YWJsaW5rc1tpXS5jbGFzc05hbWUucmVwbGFjZShcIiBhY3RpdmVcIiwgXCJcIik7XHJcbiAgICB9XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcGVuVGFic1J1bGVzKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgZXZ0LmN1cnJlbnRUYXJnZXQuY2xhc3NOYW1lICs9IFwiIGFjdGl2ZVwiO1xyXG4gIFxyXG5cclxufSIsIiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZm9vdGVyIGFbaHJlZl49XCIjXCJdJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICBzY3JvbGxUb3A6ICQoJC5hdHRyKHRoaXMsICdocmVmJykpLm9mZnNldCgpLnRvcFxyXG4gICAgfSwgMTUwMCk7XHJcbn0pOyIsIi8qXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXyBfIF9fX19fICAgICAgICAgICAgICAgICAgICAgIF8gICBfXHJcbiAgICAgICAgICAgICAgICAgICAgICB8IHwgfCAgX18gXFwgICAgICAgICAgICAgICAgICAgIHwgfCAoXylcclxuICAgIF9fXyAgX19fIF8gX18gX19fIHwgfCB8IHxfXykgfF9fX19fICAgX19fX18gIF9fIF98IHwgIF8gX19fXHJcbiAgIC8gX198LyBfX3wgJ19fLyBfIFxcfCB8IHwgIF8gIC8vIF8gXFwgXFwgLyAvIF8gXFwvIF9gIHwgfCB8IC8gX198XHJcbiAgIFxcX18gXFwgKF9ffCB8IHwgKF8pIHwgfCB8IHwgXFwgXFwgIF9fL1xcIFYgLyAgX18vIChffCB8IHxffCBcXF9fIFxcXHJcbiAgIHxfX18vXFxfX198X3wgIFxcX19fL3xffF98X3wgIFxcX1xcX19ffCBcXF8vIFxcX19ffFxcX18sX3xfKF8pIHxfX18vXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy8gfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfF9fL1xyXG5cclxuICAgIFwiRGVjbGFyYXRpdmUgb24tc2Nyb2xsIHJldmVhbCBhbmltYXRpb25zLlwiXHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzIGlzIGluc3BpcmVkIGJ5IGNicFNjcm9sbGVyLmpzLCDCqSAyMDE0LCBDb2Ryb3BzLlxyXG5cclxuICAgIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICAgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblxyXG4gICAgc2Nyb2xsUmV2ZWFsLmpzLCDCqSAyMDE0IGh0dHBzOi8vdHdpdHRlci5jb20vanVsaWFubGxveWRcclxuXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbjsoZnVuY3Rpb24gKHdpbmRvdykge1xyXG5cclxuICAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBkb2NFbGVtID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Vmlld3BvcnRIICgpIHtcclxuICAgIHZhciBjbGllbnQgPSBkb2NFbGVtWydjbGllbnRIZWlnaHQnXSxcclxuICAgICAgaW5uZXIgPSB3aW5kb3dbJ2lubmVySGVpZ2h0J107XHJcblxyXG4gICAgcmV0dXJuIChjbGllbnQgPCBpbm5lcikgPyBpbm5lciA6IGNsaWVudDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcclxuICAgIHZhciBvZmZzZXRUb3AgPSAwLFxyXG4gICAgICAgIG9mZnNldExlZnQgPSAwO1xyXG5cclxuICAgIGRvIHtcclxuICAgICAgaWYgKCFpc05hTihlbC5vZmZzZXRUb3ApKSB7XHJcbiAgICAgICAgb2Zmc2V0VG9wICs9IGVsLm9mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICBpZiAoIWlzTmFOKGVsLm9mZnNldExlZnQpKSB7XHJcbiAgICAgICAgb2Zmc2V0TGVmdCArPSBlbC5vZmZzZXRMZWZ0O1xyXG4gICAgICB9XHJcbiAgICB9IHdoaWxlIChlbCA9IGVsLm9mZnNldFBhcmVudClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0b3A6IG9mZnNldFRvcCxcclxuICAgICAgbGVmdDogb2Zmc2V0TGVmdFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaXNFbGVtZW50SW5WaWV3cG9ydCAoZWwsIGgpIHtcclxuICAgIHZhciBzY3JvbGxlZCA9IHdpbmRvdy5wYWdlWU9mZnNldCxcclxuICAgICAgICB2aWV3ZWQgPSBzY3JvbGxlZCArIGdldFZpZXdwb3J0SCgpLFxyXG4gICAgICAgIGVsSCA9IGVsLm9mZnNldEhlaWdodCxcclxuICAgICAgICBlbFRvcCA9IGdldE9mZnNldChlbCkudG9wLFxyXG4gICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyBlbEgsXHJcbiAgICAgICAgaCA9IGggfHwgMDtcclxuXHJcbiAgICByZXR1cm4gKGVsVG9wICsgZWxIICogaCkgPD0gdmlld2VkICYmIChlbEJvdHRvbSkgPj0gc2Nyb2xsZWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBleHRlbmQgKGEsIGIpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBiKSB7XHJcbiAgICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBhW2tleV0gPSBiW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhO1xyXG4gIH1cclxuXHJcblxyXG4gIGZ1bmN0aW9uIHNjcm9sbFJldmVhbChvcHRpb25zKSB7XHJcbiAgICAgIHRoaXMub3B0aW9ucyA9IGV4dGVuZCh0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgdGhpcy5faW5pdCgpO1xyXG4gIH1cclxuXHJcblxyXG5cclxuICBzY3JvbGxSZXZlYWwucHJvdG90eXBlID0ge1xyXG4gICAgZGVmYXVsdHM6IHtcclxuICAgICAgYXhpczogJ3knLFxyXG4gICAgICBkaXN0YW5jZTogJzI1cHgnLFxyXG4gICAgICBkdXJhdGlvbjogJzAuNjZzJyxcclxuICAgICAgZGVsYXk6ICcwcycsXHJcblxyXG4gIC8vICBpZiAwLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCBhcyBzb29uIGFzIGl0IGVudGVyc1xyXG4gIC8vICBpZiAxLCB0aGUgZWxlbWVudCBpcyBjb25zaWRlcmVkIGluIHRoZSB2aWV3cG9ydCB3aGVuIGl0J3MgZnVsbHkgdmlzaWJsZVxyXG4gICAgICB2aWV3cG9ydEZhY3RvcjogMC4zM1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBfaW5pdDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgdGhpcy5lbGVtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY0VsZW0ucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2Nyb2xsUmV2ZWFsXScpKTtcclxuICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG5cclxuICAvLyAgSW5pdGlhbGl6ZSBhbGwgc2Nyb2xscmV2ZWFscywgdHJpZ2dlcmluZyBhbGxcclxuICAvLyAgcmV2ZWFscyBvbiB2aXNpYmxlIGVsZW1lbnRzLlxyXG4gICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgc2VsZi5hbmltYXRlKGVsKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB2YXIgc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXNlbGYuc2Nyb2xsZWQpIHtcclxuICAgICAgICAgIHNlbGYuc2Nyb2xsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuX3Njcm9sbFBhZ2UoKTtcclxuICAgICAgICAgIH0sIDYwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB2YXIgcmVzaXplSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmdW5jdGlvbiBkZWxheWVkKCkge1xyXG4gICAgICAgICAgc2VsZi5fc2Nyb2xsUGFnZSgpO1xyXG4gICAgICAgICAgc2VsZi5yZXNpemVUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNlbGYucmVzaXplVGltZW91dCkge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucmVzaXplVGltZW91dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYucmVzaXplVGltZW91dCA9IHNldFRpbWVvdXQoZGVsYXllZCwgMjAwKTtcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVIYW5kbGVyLCBmYWxzZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuICAgIF9zY3JvbGxQYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICB0aGlzLmVsZW1zLmZvckVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0VsZW1lbnRJblZpZXdwb3J0KGVsLCBzZWxmLm9wdGlvbnMudmlld3BvcnRGYWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmFuaW1hdGUoZWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBwYXJzZUxhbmd1YWdlOiBmdW5jdGlvbiAoZWwpIHtcclxuXHJcbiAgLy8gIFNwbGl0cyBvbiBhIHNlcXVlbmNlIG9mIG9uZSBvciBtb3JlIGNvbW1hcywgcGVyaW9kcyBvciBzcGFjZXMuXHJcbiAgICAgIHZhciB3b3JkcyA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zY3JvbGxyZXZlYWwnKS5zcGxpdCgvWywgXSsvKSxcclxuICAgICAgICAgIGVudGVyRnJvbSxcclxuICAgICAgICAgIHBhcnNlZCA9IHt9O1xyXG5cclxuICAgICAgZnVuY3Rpb24gZmlsdGVyICh3b3Jkcykge1xyXG4gICAgICAgIHZhciByZXQgPSBbXSxcclxuXHJcbiAgICAgICAgICAgIGJsYWNrbGlzdCA9IFtcclxuICAgICAgICAgICAgICBcImZyb21cIixcclxuICAgICAgICAgICAgICBcInRoZVwiLFxyXG4gICAgICAgICAgICAgIFwiYW5kXCIsXHJcbiAgICAgICAgICAgICAgXCJ0aGVuXCIsXHJcbiAgICAgICAgICAgICAgXCJidXRcIlxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICB3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkLCBpKSB7XHJcbiAgICAgICAgICBpZiAoYmxhY2tsaXN0LmluZGV4T2Yod29yZCkgPiAtMSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXQucHVzaCh3b3JkKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgfVxyXG5cclxuICAgICAgd29yZHMgPSBmaWx0ZXIod29yZHMpO1xyXG5cclxuICAgICAgd29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCwgaSkge1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHdvcmQpIHtcclxuICAgICAgICAgIGNhc2UgXCJlbnRlclwiOlxyXG4gICAgICAgICAgICBlbnRlckZyb20gPSB3b3Jkc1tpICsgMV07XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwiYm90dG9tXCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieVwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZW50ZXJGcm9tID09IFwibGVmdFwiIHx8IGVudGVyRnJvbSA9PSBcInJpZ2h0XCIpIHtcclxuICAgICAgICAgICAgICBwYXJzZWQuYXhpcyA9IFwieFwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgY2FzZSBcImFmdGVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ3YWl0XCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kZWxheSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJtb3ZlXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kaXN0YW5jZSA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJvdmVyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5kdXJhdGlvbiA9IHdvcmRzW2kgKyAxXTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIGNhc2UgXCJ0cmlnZ2VyXCI6XHJcbiAgICAgICAgICAgIHBhcnNlZC5ldmVudE5hbWUgPSB3b3Jkc1tpICsgMV07XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgIC8vICBVbnJlY29nbml6YWJsZSB3b3JkczsgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gIC8vICBBZnRlciBhbGwgdmFsdWVzIGFyZSBwYXJzZWQsIGxldOKAmXMgbWFrZSBzdXJlIG91ciBvdXJcclxuICAvLyAgcGl4ZWwgZGlzdGFuY2UgaXMgbmVnYXRpdmUgZm9yIHRvcCBhbmQgbGVmdCBlbnRyYW5jZXMuXHJcbiAgLy9cclxuICAvLyAgaWUuIFwibW92ZSAyNXB4IGZyb20gdG9wXCIgc3RhcnRzIGF0ICd0b3A6IC0yNXB4JyBpbiBDU1MuXHJcblxyXG4gICAgICBpZiAoZW50ZXJGcm9tID09IFwidG9wXCIgfHwgZW50ZXJGcm9tID09IFwibGVmdFwiKSB7XHJcblxyXG4gICAgICAgIGlmICghdHlwZW9mIHBhcnNlZC5kaXN0YW5jZSA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICBwYXJzZWQuZGlzdGFuY2UgPSBcIi1cIiArIHBhcnNlZC5kaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgcGFyc2VkLmRpc3RhbmNlID0gXCItXCIgKyB0aGlzLm9wdGlvbnMuZGlzdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlZDtcclxuICAgIH0sXHJcblxyXG4gICAgLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXHJcblxyXG4gICAgZ2VuQ1NTOiBmdW5jdGlvbiAoZWwsIGF4aXMpIHtcclxuICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VMYW5ndWFnZShlbCk7XHJcblxyXG4gICAgICB2YXIgZGlzdCAgID0gcGFyc2VkLmRpc3RhbmNlIHx8IHRoaXMub3B0aW9ucy5kaXN0YW5jZSxcclxuICAgICAgICAgIGR1ciAgICA9IHBhcnNlZC5kdXJhdGlvbiB8fCB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXHJcbiAgICAgICAgICBkZWxheSAgPSBwYXJzZWQuZGVsYXkgICAgfHwgdGhpcy5vcHRpb25zLmRlbGF5LFxyXG4gICAgICAgICAgYXhpcyAgID0gcGFyc2VkLmF4aXMgICAgIHx8IHRoaXMub3B0aW9ucy5heGlzO1xyXG5cclxuICAgICAgdmFyIHRyYW5zaXRpb24gPSBcIi13ZWJraXQtdHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFwiLW1vei10cmFuc2l0aW9uOiBhbGwgXCIgKyBkdXIgKyBcIiBlYXNlIFwiICsgZGVsYXkgKyBcIjtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIi1vLXRyYW5zaXRpb246IGFsbCBcIiArIGR1ciArIFwiIGVhc2UgXCIgKyBkZWxheSArIFwiO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNpdGlvbjogYWxsIFwiICsgZHVyICsgXCIgZWFzZSBcIiArIGRlbGF5ICsgXCI7XCI7XHJcblxyXG4gICAgICB2YXIgaW5pdGlhbCA9IFwiLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVwiICsgYXhpcyArIFwiKFwiICsgZGlzdCArIFwiKTtcIiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoXCIgKyBkaXN0ICsgXCIpO1wiICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwidHJhbnNmb3JtOiB0cmFuc2xhdGVcIiArIGF4aXMgKyBcIihcIiArIGRpc3QgKyBcIik7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHk6IDA7XCI7XHJcblxyXG4gICAgICB2YXIgdGFyZ2V0ID0gXCItd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCItbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBcInRyYW5zZm9ybTogdHJhbnNsYXRlXCIgKyBheGlzICsgXCIoMCk7XCIgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3BhY2l0eTogMTtcIjtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uLFxyXG4gICAgICAgIGluaXRpYWw6IGluaXRpYWwsXHJcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgICAgdG90YWxEdXJhdGlvbjogKChwYXJzZUZsb2F0KGR1cikgKyBwYXJzZUZsb2F0KGRlbGF5KSkgKiAxMDAwKVxyXG4gICAgICB9O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbiAgICBhbmltYXRlOiBmdW5jdGlvbiAoZWwpIHtcclxuICAgICAgdmFyIGNzcyA9IHRoaXMuZ2VuQ1NTKGVsKTtcclxuXHJcbiAgICAgIGlmICghZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MuaW5pdGlhbCk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXNyLWluaXQnLCB0cnVlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoaXNFbGVtZW50SW5WaWV3cG9ydChlbCwgdGhpcy5vcHRpb25zLnZpZXdwb3J0RmFjdG9yKSkge1xyXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjc3MudGFyZ2V0ICsgY3NzLnRyYW5zaXRpb24pO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcclxuICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnZGF0YS1zci1jb21wbGV0ZScsIHRydWUpO1xyXG4gICAgICAgIH0sIGNzcy50b3RhbER1cmF0aW9uKTtcclxuICAgICAgfVxyXG5cclxuICAgIH1cclxuICB9OyAvLyBlbmQgc2Nyb2xsUmV2ZWFsLnByb3RvdHlwZVxyXG5cclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsUmV2ZWFsID0gbmV3IHNjcm9sbFJldmVhbCgpO1xyXG4gIH0pO1xyXG5cclxufSkod2luZG93KTsiXX0=
